<h2>{{name}}</h2>
<hr>

{{outlet}}

{{#unless isJoined}}
  <button class="btn btn-success"{{action "join"}}>Join this competition</button>
{{else}}
  {{#linkTo "activities" controllers.application.currentUser class="btn btn-success"}}Log Activity{{/linkTo}}
{{/unless}}

<div class="pull-right">          
  {{#linkTo "competition.edit" this class="btn btn-info"}}Edit{{/linkTo}}
  <a href="#" class="btn btn-danger" {{action delete this}}>Delete</a>
</div>

<div class="row">
  <div class="col-md-4">
    <h4>Information</h4>
    <p>Start Date: {{date startDate}}</p>
    <p>End Date: {{date endDate}}</p>
    <p>Max Participants: {{maxParticipants}}</p>
    <p>Lower Level Restriction: {{lowerLevelRestriction}}</p>
    <p>Upper Level Restriction: {{upperLevelRestriction}}</p>
    <p>Public: {{isPublic}}</p>
    <p>Active: {{active}}</p>
    <p>Reward: {{reward}}</p>
    <br />
  </div>

  <div class="col-md-4">
    <h4>Exercises</h4>
    <ul>
    {{#each controller.exercises}}
      <li>{{name}}</li>
    {{/each}}
    </ul>
  </div>

  <div class="col-md-4">
    <h4>Users</h4>
    <ul>
    {{#each controller.users}}
      <li>{{email}}</li>
    {{else}}
      <li>None currently registered</li>
    {{/each}}
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h3>{{name}} Ranking</h3>
    <hr>
    <ol>
      {{#each user in users}}
        <li>{{user.email}}
          <ul>
            {{#each user.competitionActivities}}
              <li>{{this.activity.exercise.name}} - {{this.activity.reps}} - {{date this.activity.createdAt}}</li>
            {{/each}}
            <hr>
            <li>{{user.competitionActivities}} </li>
          </ul>
        </li>
      {{/each}}
    </ol>
  </div>

  <div class="col-md-6">
    <h3>Exercises for the competition</h3>
    <hr>
    <ul>
      {{#each exercises}}
        <li>{{name}}</li>
      {{/each}}
    </ul>
  </div>
</div>

